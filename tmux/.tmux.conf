

# normal --- {{{
set  -g @scroll-speed-num-lines-per-scroll 3
set  -g mouse             on
# set-option -g status-position top

# scrollback buffer n lines
set  -g history-limit     100000
set  -g display-time      4000
# for os x
set  -g set-clipboard     on

setw -g mode-keys         vi

set  -g base-index        1
setw -g pane-base-index   1

# focus events enabled for terminals that support them
set  -g focus-events      on
# super useful when using "grouped sessions" and multi-monitor setup
setw -g aggressive-resize on

# --- }}}


# style ---{{{
# change focous color
set -g  window-style        'fg=colour247,bg=colour236'
set -g  window-active-style 'fg=colour251,bg=black'

# terminal settings
set -sg escape-time         0
# cursor blink in vim
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

# color in tmux
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# --- }}}


# key binding --- {{{
set    -g  prefix C-a
bind   C-a send-prefix
unbind C-b
unbind   ,
unbind Right

# reload config
bind R source-file ~/.tmux.conf

# kill
bind x kill-pane
bind X kill-window
bind K confirm kill-server

# window switch 
#| n => next window
#| p => previous window
#| { => moce current pane to previous position
#| } => moce current pane to next position
bind ]  next-window
bind [  previous-window
bind n  next-window
bind p  previous-window
bind \{ swap-window -t -1\; select-window -t -1
bind \} swap-window -t +1\; select-window -t +1
bind ,  swap-window -t -1\; select-window -t -1
bind .  swap-window -t +1\; select-window -t +1

# session
bind -r Right switch-client  -n
bind -r Left  switch-client  -p
bind -r Enter switch-client  -l
bind -r C-r   command-prompt "rename-session %%"

# window rename 
bind-key c   new-window #\; rename-window "#{b:pane_current_path}"
bind     r   rename-window  "#{b:pane_current_path}"
bind-key C-r command-prompt "rename-window %%"


# window-pane switch
bind b break-pane     -s :
bind t command-prompt -p "join pane from:" "join-pane -h -s '%%'"
bind y command-prompt -p "join pane from:" "join-pane -v -s '%%'"
# bind-key s command-prompt -p "send pane to:"   "join-pane -h -t '%%'"

### C-o: rotate all panes

# pane split
bind   |  split-window -h -c "#{pane_current_path}"
bind   \\ split-window -h -c "#{pane_current_path}"
bind   -  split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# pane resizing  
bind -r C-k resize-pane -U
bind -r C-j resize-pane -D
bind -r C-h resize-pane -L
bind -r C-l resize-pane -R

# pane switching
bind -r k   select-pane -U
bind -r j   select-pane -D
bind -r h   select-pane -L
bind -r l   select-pane -R

# pane swap
bind -r H swap-pane -U
bind -r L swap-pane -D

bind -n S-M-Left {
  copy-mode
  send -X clear-selection
  send -X start-of-line
  send -X cursor-left
  send -X begin-selection
  send -X start-of-line
  send -X stop-selection
}

bind -n S-M-Up {
  copy-mode
  send -X clear-selection
  send -X cursor-up
  send -X start-of-line
  send -X start-of-line
  send -X cursor-left
  send -X begin-selection
  send -X search-backward "(Δ )|(Ε )|(✘ )"
  send -X start-of-line
  send -X start-of-line
  send -X stop-selection
}

bind -n S-M-Right {
  copy-mode
  send -X clear-selection
  send -X cursor-down
  send -X start-of-line
  send -X begin-selection
  send -X end-of-line
  send -X stop-selection
}

bind -n S-M-Down {
  copy-mode
  send -X clear-selection
  send -X end-of-line
  send -X end-of-line
  send -X search-forward "(Δ )|(Ε )|(✘ )"
  send -X start-of-line
  send -X start-of-line
  send -X begin-selection
  send -X search-forward  "(Δ )|(Ε )|(✘ )"
  send -X cursor-up
  send -X start-of-line
  send -X start-of-line
  send -X cursor-left
  send -X stop-selection
}

# --- }}}


# plugins --- {{{
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'

# power line
set -g @plugin 'wfxr/tmux-power'
set -g @tmux_power_theme 'sky'
set -g @tmux_power_left_arrow_icon ' '
set -g @tmux_power_right_arrow_icon ' '

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/code/github.com/tmux-plugins/tpm/tpm'

# --- }}}
