#! /usr/bin/env lua

-- execute command in bash
function exec(command)
	local handle = io.popen(command)
	local result = handle:read("*a")
	handle:close()
	return trim_space(result)
end

function trim_space(s)
	return s:match"^%s*(.*)":match"(.-)%s*$"
end

-- copy from https://github.com/skywind3000/z.lua/blob/master/z.lua#L137
function string:split(sSeparator, nMax, bRegexp)
	assert(sSeparator ~= '')
	assert(nMax == nil or nMax >= 1)
	local aRecord = {}
	if self:len() > 0 then
		local bPlain = not bRegexp
		nMax = nMax or -1
		local nField, nStart = 1, 1
		local nFirst, nLast = self:find(sSeparator, nStart, bPlain)
		while nFirst and nMax ~= 0 do
			aRecord[nField] = self:sub(nStart, nFirst - 1)
			nField = nField + 1
			nStart = nLast + 1
			nFirst, nLast = self:find(sSeparator, nStart, bPlain)
			nMax = nMax - 1
		end
		aRecord[nField] = self:sub(nStart)
	else
		aRecord[1] = ''
	end
	return aRecord
end

function string:ends_with(text)
	return text == "" or self:sub(-#text) == text
end

function string:starts_with(str, start)
   return str:sub(1, #start) == start
end


